(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3d9946d3"],{"0eb7":function(e,t,s){"use strict";var a=s("5215"),o=s.n(a);o.a},5215:function(e,t,s){},"7ded":function(e,t,s){"use strict";var a=s("da71");t["a"]={UserLogin:function(e,t){return Object(a["b"])({url:"TeachersStudents"===t?"api/User/Login":"api/User/VisitorLogin",method:"post",data:{Account:e.Account,Password:e.Password,OpenId:e.OpenId}})},tempVisitorLogin:function(e){return Object(a["b"])({url:"api/User/TempVisitorLogin",method:"post",data:e})},loginSmsCaptcha:function(e){return Object(a["b"])({url:"api/User/LoginSmsCaptcha?phone=".concat(e),method:"post"})},visitorsApplication:function(e){return Object(a["b"])({url:"api/User/TempVisitorApply",method:"post",data:e})},applySmsCaptcha:function(e){return Object(a["b"])({url:"api/User/ApplySmsCaptcha?phone=".concat(e),method:"post"})},tempVisitorTypeList:function(){return Object(a["b"])({url:"api/User/TempVisitorTypeList",method:"post"})}}},afb3:function(e,t,s){e.exports=s.p+"img/loginlogo.84bc765a.png"},d9c9:function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"login"},[e._m(0),"TeachersStudents"===e.loginType?s("div",{staticClass:"formbox"},[s("div",{staticClass:"label"},[e._v("学校账号")]),s("div",{staticClass:"label"},[e._v("Username")]),s("div",{staticClass:"inputbox"},[s("van-field",{attrs:{placeholder:"请输入学校账号 Please enter your XJTLU username"},model:{value:e.adaccount,callback:function(t){e.adaccount=t},expression:"adaccount"}})],1),s("div",{staticClass:"label",staticStyle:{"margin-top":"20px"}},[e._v("密码")]),s("div",{staticClass:"label"},[e._v("Password")]),s("div",{staticClass:"inputbox"},[s("van-field",{attrs:{type:"password",placeholder:"请输入密码 Please enter your password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)]):"LongVisitor"===e.loginType?s("div",{staticClass:"formbox"},[s("div",{staticClass:"label"},[e._v("身份证号码")]),s("div",{staticClass:"label"},[e._v("National ID")]),s("div",{staticClass:"inputbox"},[s("van-field",{attrs:{placeholder:"请输入你的身份证号码"},model:{value:e.adaccount,callback:function(t){e.adaccount=t},expression:"adaccount"}})],1),s("div",{staticClass:"label",staticStyle:{"margin-top":"20px"}},[e._v("密码")]),s("div",{staticClass:"label"},[e._v("Password")]),s("div",{staticClass:"inputbox"},[s("van-field",{attrs:{type:"password",placeholder:"请输入你身份证号码的后六位"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)]):s("div",{staticClass:"formbox"},[s("div",{staticClass:"label"},[e._v("手机号码")]),s("div",{staticClass:"label"},[e._v("Phone Number")]),s("div",{staticClass:"inputbox"},[s("van-field",{attrs:{type:"tel",maxlength:"11",placeholder:"请输入手机号码 Please enter Phone Number Location"},model:{value:e.PhoneNumber,callback:function(t){e.PhoneNumber=t},expression:"PhoneNumber"}})],1),s("div",{staticClass:"inputbox msCode"},[s("van-field",{attrs:{maxlength:"4",center:"",clearable:"",label:"短信验证码",placeholder:"请输入短信验证码"},scopedSlots:e._u([{key:"button",fn:function(){return[e.cutDownTime?e._e():s("van-button",{attrs:{color:"#010544",size:"small",type:"info"},on:{click:e.sendSMSCode}},[e._v("发送验证码")]),e.cutDownTime?s("van-button",{attrs:{color:"#0106468f",disabled:"",size:"small",type:"info"}},[s("van-count-down",{attrs:{seconds:"",time:e.time,format:"ss s后再试"},on:{finish:function(t){return e.finished()}}})],1):e._e()]},proxy:!0}]),model:{value:e.smscode,callback:function(t){e.smscode=t},expression:"smscode"}})],1)]),s("div",{staticClass:"buttonbox"},[s("button",{attrs:{type:"input"},on:{click:e.Login}},[s("div",[e._v("登录")]),s("div",[e._v("Log in")])])])])},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"logo"},[a("img",{attrs:{src:s("afb3")}})])}],n=s("7ded"),i=s("d399"),r={components:{},props:{},data:function(){return{loginType:null,adaccount:"",password:"",PhoneNumber:null,smscode:null,cutDownTime:null,time:6e4}},watch:{},computed:{},methods:{finished:function(){this.cutDownTime=""},sendSMSCode:function(){var e=this;if(this.PhoneNumber){var t=/^[1][0-9]{10}$/g;if(11!=this.PhoneNumber.length|!t.test(this.PhoneNumber))return this.$toast("请输入正确的手机号\nplease enter a valid phone number");this.cutDownTime=60,n["a"].loginSmsCaptcha(this.PhoneNumber).then((function(t){var s=t.data;return 0==s.Code?e.$toast("发送成功,注意查收"):e.$toast(s.Message)}))}else Object(i["a"])("请输入手机号码\nInsert Phone Number Please")},Login:function(){var e=this;if("TempVisitor"!=this.loginType){if(!this.adaccount)return void("TeachersStudents"==this.loginType?Object(i["a"])("请输入账号\nInsert Account Please"):Object(i["a"])("请输入身份证号码\nInsert ID Card Please"));if(!this.password)return void Object(i["a"])("请输入密码\nInsert Password Please")}else{if(!this.PhoneNumber)return void Object(i["a"])("请输入手机号码\nInsert Phone Number Please");var t=/^[1][0-9]{10}$/g;if(11!=this.PhoneNumber.length|!t.test(this.PhoneNumber))return this.$toast("请输入正确的手机号\nplease enter a valid phone number");if(!this.smscode)return void Object(i["a"])("请输入短信验证码\nInsert SMS verification code Please")}if("TempVisitor"!=this.loginType){var s={Account:this.adaccount,Password:this.password,OpenId:sessionStorage.getItem("xjopenid")};n["a"].UserLogin(s,this.loginType).then((function(t){0==t.data.Code?(sessionStorage.setItem("xjadcode",t.data.Data.Account),sessionStorage.setItem("MobileUserId",t.data.Data.MobileUserId),sessionStorage.setItem("MobileUserRole",t.data.Data.MobileUserRole),sessionStorage.setItem("UserName",t.data.Data.Name),e.$router.push({name:"Home"})):Object(i["a"])(t.data.Message)}))}else{var a={PhoneNumber:this.PhoneNumber,SmsCode:this.smscode,OpenId:sessionStorage.getItem("xjopenid")};n["a"].tempVisitorLogin(a).then((function(t){var s=t.data;0==s.Code?(sessionStorage.setItem("xjadcode",s.Data.Account),sessionStorage.setItem("MobileUserId",s.Data.MobileUserId),sessionStorage.setItem("MobileUserRole",s.Data.MobileUserRole),sessionStorage.setItem("UserName",s.Data.Name),s.Data.IsRegisted?e.$router.push({name:"Home"}):e.$router.push({name:"VisitorApplication"})):Object(i["a"])(s.Message)}))}},VisitorApplication:function(){this.$router.push({name:"VisitorApplication"})}},created:function(){this.loginType=this.$route.query.type},mounted:function(){}},c=r,l=(s("0eb7"),s("2877")),d=Object(l["a"])(c,a,o,!1,null,"6e7288ea",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-3d9946d3.a8fa81dd.js.map